{% extends "base.html" %}

{% block content %}
<div class="glass-panel p-4 p-lg-5 reveal">
    <div class="d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4">
        <div>
            <div class="section-kicker mb-1">Community Issues</div>
            <h2 class="mb-0">Reports</h2>
        </div>

        <div class="d-flex flex-wrap gap-2 align-items-center">
            <form method="get" class="d-flex flex-wrap gap-2">
                <input type="text"
                       name="q"
                       value="{{ request.GET.q }}"
                       placeholder="Search reports..."
                       class="form-control"
                       oninput="if(this.value === '') this.form.submit();">

            </form>

            <a href="{% url 'reports:create' %}" class="btn btn-success">
                Create Report
            </a>
        </div>
    </div>

    {% if reports %}
        <div class="row g-3">
            {% for report in reports %}
                <div class="col-md-6 reveal reveal-delay-1">
                    <div class="soft-card p-3 h-100">
                        <h5 class="mb-2">
                            <a class="text-decoration-none" href="{% url 'reports:details' report.pk report.slug %}">
                                {{ report.title }}
                            </a>
                        </h5>
                        <p class="text-muted mb-2">{{ report.description|truncatechars:80 }}</p>
                        <span class="badge bg-light text-dark border">
                            Status: {{ report.status }}
                        </span>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="mb-0 text-muted">No reports yet.</p>
    {% endif %}
</div>

{% endblock %}
