{% extends "base.html" %}

{% block content %}

<div class="glass-panel p-4 p-lg-5 reveal">
    <div class="d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4">
        <div>
            <div class="section-kicker mb-1">Local Talent</div>
            <h2 class="mb-0">Skills</h2>
        </div>

        <div class="d-flex flex-wrap gap-2 align-items-center">
            <form method="get" class="d-flex flex-wrap gap-2">
                <input type="text"
                       name="q"
                       value="{{ request.GET.q }}"
                       placeholder="Search skills..."
                       class="form-control"
                       oninput="if(this.value === '') this.form.submit();">

            </form>

            <a href="{% url 'skills:create' %}" class="btn btn-success">
                Create Skill
            </a>
        </div>
    </div>

    {% if skills %}
        <div class="row g-3">
            {% for skill in skills %}
                <div class="col-md-6 reveal reveal-delay-1">
                    <div class="soft-card p-3 h-100">
                        <h5 class="mb-2">
                            <a class="text-decoration-none" href="{% url 'skills:details' skill.pk %}">
                                {{ skill.name }}
                            </a>
                        </h5>

                        <p class="text-muted mb-2">{{ skill.description|truncatechars:80 }}</p>
                        
                        {% if skill.level %}
                        <p class="mb-2"><strong>Level:</strong> {{ skill.level }}</p>
                        {% endif %}
                        <p class="mb-2">
                            <strong>Categories:</strong>
                            {% for category in skill.categories.all %}
                                <span class="badge bg-secondary">
                                    {{ category.name }}
                                </span>
                            {% empty %}
                                No categories
                            {% endfor %}
                        </p>

                        <p class="mb-0">
                            <strong>Contact:</strong>
                            {{ skill.contact_name }}
                        </p>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="mb-0 text-muted">No skills yet.</p>
    {% endif %}
</div>

{% endblock %}
